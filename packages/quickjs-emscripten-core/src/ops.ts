// This file is generated by scripts/generate.ts ops - do not edit manually

import type {
  BorrowedHeapCharPointer,
  CommandPtr,
  EvalFlags,
  Float64,
  FuncListSlot,
  HostRefId,
  Int32,
  Int64,
  JSCFunctionTypePointer,
  JSPropFlags,
  JSValuePointer,
  JSValueSlot,
  NewErrorFlags,
  NewTypedArrayFlags,
  SetPropFlags,
  Uint32,
  Uint8,
} from "@jitl/quickjs-ffi-types"

// =============================================================================

// Setter Helpers

// =============================================================================



function setOpcode(view: DataView, offset: number, opcode: number): void {
  view.setUint8(offset + 0, opcode)
}

function setSlotA(view: DataView, offset: number, slot: number): void {
  view.setUint8(offset + 1, slot)
}

function setSlotB(view: DataView, offset: number, slot: number): void {
  view.setUint8(offset + 2, slot)
}

function setSlotC(view: DataView, offset: number, slot: number): void {
  view.setUint8(offset + 3, slot)
}

function setD1_u32(view: DataView, offset: number, value: number): void {
  view.setUint32(offset + 4, value, true)
}

function setD2_u32(view: DataView, offset: number, value: number): void {
  view.setUint32(offset + 8, value, true)
}

function setD2_i32(view: DataView, offset: number, value: number): void {
  view.setInt32(offset + 8, value, true)
}

function setD3_u32(view: DataView, offset: number, value: number): void {
  view.setUint32(offset + 12, value, true)
}

function setD3_i32(view: DataView, offset: number, value: number): void {
  view.setInt32(offset + 12, value, true)
}

function setData_f64(view: DataView, offset: number, value: number): void {
  view.setFloat64(offset + 4, value, true)
}

function setData_i64(view: DataView, offset: number, value: bigint): void {
  view.setBigInt64(offset + 4, value, true)
}

// =============================================================================

// Writer Functions (generated)

// =============================================================================



export function writeInvalid(view: DataView, offset: CommandPtr): void {
  setOpcode(view, offset, 0)
}

export function writeNewObject(view: DataView, offset: CommandPtr, result_slot: JSValueSlot): void {
  setOpcode(view, offset, 1)
  setSlotA(view, offset, result_slot)
}

export function writeNewObjectProto(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, proto_slot: JSValueSlot): void {
  setOpcode(view, offset, 2)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, proto_slot)
}

export function writeNewArray(view: DataView, offset: CommandPtr, result_slot: JSValueSlot): void {
  setOpcode(view, offset, 3)
  setSlotA(view, offset, result_slot)
}

export function writeNewDate(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, timestamp: Float64): void {
  setOpcode(view, offset, 4)
  setSlotA(view, offset, result_slot)
  setData_f64(view, offset, timestamp)
}

export function writeNewError(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, maybe_name_len: Uint8, new_error_flags: NewErrorFlags, message_ptr: BorrowedHeapCharPointer, message_len: Uint32, name_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 5)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, maybe_name_len)
  setSlotC(view, offset, new_error_flags)
  setD1_u32(view, offset, message_ptr)
  setD2_u32(view, offset, message_len)
  setD3_u32(view, offset, name_ptr)
}

export function writeNewArraybuffer(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, data_ptr: BorrowedHeapCharPointer, data_len: Uint32): void {
  setOpcode(view, offset, 6)
  setSlotA(view, offset, result_slot)
  setD1_u32(view, offset, data_ptr)
  setD2_u32(view, offset, data_len)
}

export function writeNewTypedArray(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, array_type: NewTypedArrayFlags, source_offset: Uint32, length: Uint32): void {
  setOpcode(view, offset, 7)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setSlotC(view, offset, array_type)
  setD1_u32(view, offset, source_offset)
  setD2_u32(view, offset, length)
}

export function writeNewSymbol(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, is_global: Uint8, desc_ptr: BorrowedHeapCharPointer, desc_len: Uint32): void {
  setOpcode(view, offset, 8)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, is_global)
  setD1_u32(view, offset, desc_ptr)
  setD2_u32(view, offset, desc_len)
}

export function writeNewFloat64(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, value: Float64): void {
  setOpcode(view, offset, 9)
  setSlotA(view, offset, result_slot)
  setData_f64(view, offset, value)
}

export function writeNewString(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, str_ptr: BorrowedHeapCharPointer, str_len: Uint32): void {
  setOpcode(view, offset, 10)
  setSlotA(view, offset, result_slot)
  setD1_u32(view, offset, str_ptr)
  setD2_u32(view, offset, str_len)
}

export function writeNewBigint(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, value: Int64): void {
  setOpcode(view, offset, 11)
  setSlotA(view, offset, result_slot)
  setData_i64(view, offset, value)
}

export function writeNewFunc(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, arity: Uint8, is_constructor: Uint8, name_ptr: BorrowedHeapCharPointer, name_len: Uint32, host_ref_id: HostRefId): void {
  setOpcode(view, offset, 12)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, arity)
  setSlotC(view, offset, is_constructor)
  setD1_u32(view, offset, name_ptr)
  setD2_u32(view, offset, name_len)
  setD3_u32(view, offset, host_ref_id)
}

export function writeSetStrValue(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, value_slot: JSValueSlot, flags: SetPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 13)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, value_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeSetStrNull(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 14)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeSetStrUndef(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 15)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeSetStrBool(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, bool_val: Uint8, flags: SetPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 16)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, bool_val)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeSetStrInt32(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32, int_val: Int32): void {
  setOpcode(view, offset, 17)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
  setD3_i32(view, offset, int_val)
}

export function writeSetStrF64(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, maybe_key_len: Uint8, flags: SetPropFlags, f64_val: Float64, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 18)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, maybe_key_len)
  setSlotC(view, offset, flags)
  setData_f64(view, offset, f64_val)
  setD3_u32(view, offset, key_ptr)
}

export function writeSetStrBigint(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, maybe_key_len: Uint8, flags: SetPropFlags, i64_val: Int64, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 19)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, maybe_key_len)
  setSlotC(view, offset, flags)
  setData_i64(view, offset, i64_val)
  setD3_u32(view, offset, key_ptr)
}

export function writeSetStrString(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, maybe_key_len: Uint8, flags: SetPropFlags, str_ptr: BorrowedHeapCharPointer, str_len: Uint32, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 20)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, maybe_key_len)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, str_ptr)
  setD2_u32(view, offset, str_len)
  setD3_u32(view, offset, key_ptr)
}

export function writeSetIdxValue(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, value_slot: JSValueSlot, flags: SetPropFlags, index: Uint32): void {
  setOpcode(view, offset, 21)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, value_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
}

export function writeSetIdxNull(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, index: Uint32): void {
  setOpcode(view, offset, 22)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
}

export function writeSetIdxUndef(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, index: Uint32): void {
  setOpcode(view, offset, 23)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
}

export function writeSetIdxBool(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, bool_val: Uint8, flags: SetPropFlags, index: Uint32): void {
  setOpcode(view, offset, 24)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, bool_val)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
}

export function writeSetIdxInt32(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, index: Uint32, int_val: Int32): void {
  setOpcode(view, offset, 25)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
  setD2_i32(view, offset, int_val)
}

export function writeSetIdxF64(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, f64_val: Float64, index: Uint32): void {
  setOpcode(view, offset, 26)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setData_f64(view, offset, f64_val)
  setD3_u32(view, offset, index)
}

export function writeSetIdxBigint(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, i64_val: Int64, index: Uint32): void {
  setOpcode(view, offset, 27)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setData_i64(view, offset, i64_val)
  setD3_u32(view, offset, index)
}

export function writeSetIdxString(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, flags: SetPropFlags, str_ptr: BorrowedHeapCharPointer, str_len: Uint32, index: Uint32): void {
  setOpcode(view, offset, 28)
  setSlotA(view, offset, target_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, str_ptr)
  setD2_u32(view, offset, str_len)
  setD3_u32(view, offset, index)
}

export function writeSet(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, key_slot: JSValueSlot, value_slot: JSValueSlot, flags: SetPropFlags): void {
  setOpcode(view, offset, 29)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, key_slot)
  setSlotC(view, offset, value_slot)
  setD1_u32(view, offset, flags)
}

export function writeDefGetset(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, maybe_key_len: Uint8, flags: JSPropFlags, getter_ref: HostRefId, setter_ref: HostRefId, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 30)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, maybe_key_len)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, getter_ref)
  setD2_u32(view, offset, setter_ref)
  setD3_u32(view, offset, key_ptr)
}

export function writeGet(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, key_slot: JSValueSlot): void {
  setOpcode(view, offset, 31)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setSlotC(view, offset, key_slot)
}

export function writeGetStr(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 32)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeGetIdx(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, index: Uint32): void {
  setOpcode(view, offset, 33)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setD1_u32(view, offset, index)
}

export function writeGlobal(view: DataView, offset: CommandPtr, result_slot: JSValueSlot): void {
  setOpcode(view, offset, 34)
  setSlotA(view, offset, result_slot)
}

export function writeGlobalGetStr(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 35)
  setSlotA(view, offset, result_slot)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeGlobalSetStr(view: DataView, offset: CommandPtr, value_slot: JSValueSlot, flags: JSPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 36)
  setSlotA(view, offset, value_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeMapSet(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, key_slot: JSValueSlot, value_slot: JSValueSlot): void {
  setOpcode(view, offset, 37)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, key_slot)
  setSlotC(view, offset, value_slot)
}

export function writeMapSetStr(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, value_slot: JSValueSlot, key_ptr: BorrowedHeapCharPointer, key_len: Uint32): void {
  setOpcode(view, offset, 38)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, value_slot)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
}

export function writeSetAdd(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, value_slot: JSValueSlot): void {
  setOpcode(view, offset, 39)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, value_slot)
}

export function writeCall(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, func_slot: JSValueSlot, this_slot: JSValueSlot, argv: JSValuePointer, argc: Uint32): void {
  setOpcode(view, offset, 40)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, func_slot)
  setSlotC(view, offset, this_slot)
  setD1_u32(view, offset, argv)
  setD2_u32(view, offset, argc)
}

export function writeCallCtor(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, ctor_slot: JSValueSlot, argv: JSValuePointer, argc: Uint32): void {
  setOpcode(view, offset, 41)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, ctor_slot)
  setD1_u32(view, offset, argv)
  setD2_u32(view, offset, argc)
}

export function writeEval(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, maybe_filename_len: Uint8, call_flags: EvalFlags, code_ptr: BorrowedHeapCharPointer, code_len: Uint32, filename: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 42)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, maybe_filename_len)
  setSlotC(view, offset, call_flags)
  setD1_u32(view, offset, code_ptr)
  setD2_u32(view, offset, code_len)
  setD3_u32(view, offset, filename)
}

export function writeThrow(view: DataView, offset: CommandPtr, error_slot: JSValueSlot): void {
  setOpcode(view, offset, 43)
  setSlotA(view, offset, error_slot)
}

export function writeResolveExc(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, maybe_exc_slot: JSValueSlot): void {
  setOpcode(view, offset, 44)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, maybe_exc_slot)
}

export function writeDup(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot): void {
  setOpcode(view, offset, 45)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
}

export function writeDupPtr(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, value_ptr: JSValuePointer): void {
  setOpcode(view, offset, 46)
  setSlotA(view, offset, result_slot)
  setD1_u32(view, offset, value_ptr)
}

export function writeFree(view: DataView, offset: CommandPtr, target_slot: JSValueSlot): void {
  setOpcode(view, offset, 47)
  setSlotA(view, offset, target_slot)
}

export function writeFreePtr(view: DataView, offset: CommandPtr, value_ptr: JSValuePointer): void {
  setOpcode(view, offset, 48)
  setD1_u32(view, offset, value_ptr)
}

export function writeBytecodeWrite(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, flags: Uint32): void {
  setOpcode(view, offset, 49)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setD1_u32(view, offset, flags)
}

export function writeBytecodeRead(view: DataView, offset: CommandPtr, result_slot: JSValueSlot, source_slot: JSValueSlot, flags: Uint32): void {
  setOpcode(view, offset, 50)
  setSlotA(view, offset, result_slot)
  setSlotB(view, offset, source_slot)
  setD1_u32(view, offset, flags)
}

export function writeFunclistNew(view: DataView, offset: CommandPtr, result_funclist_slot: FuncListSlot, count: Uint32): void {
  setOpcode(view, offset, 51)
  setSlotA(view, offset, result_funclist_slot)
  setD1_u32(view, offset, count)
}

export function writeFunclistAssign(view: DataView, offset: CommandPtr, target_slot: JSValueSlot, source_funclist_slot: FuncListSlot): void {
  setOpcode(view, offset, 52)
  setSlotA(view, offset, target_slot)
  setSlotB(view, offset, source_funclist_slot)
}

export function writeFunclistFree(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot): void {
  setOpcode(view, offset, 53)
  setSlotA(view, offset, target_funclist_slot)
}

export function writeFunclistDefCfunc(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, arity: Uint8, flags: JSPropFlags, index: Uint32, func_name_ptr: BorrowedHeapCharPointer, c_func_ptr: JSCFunctionTypePointer): void {
  setOpcode(view, offset, 54)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, arity)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
  setD2_u32(view, offset, func_name_ptr)
  setD3_u32(view, offset, c_func_ptr)
}

export function writeFunclistDefCfuncCtor(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, arity: Uint8, flags: JSPropFlags, index: Uint32, func_name_ptr: BorrowedHeapCharPointer, c_func_ptr: JSCFunctionTypePointer): void {
  setOpcode(view, offset, 55)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, arity)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
  setD2_u32(view, offset, func_name_ptr)
  setD3_u32(view, offset, c_func_ptr)
}

export function writeFunclistDefCgetset(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, index: Uint8, flags: JSPropFlags, key_ptr: BorrowedHeapCharPointer, getter_ptr: JSCFunctionTypePointer, setter_ptr: JSCFunctionTypePointer): void {
  setOpcode(view, offset, 56)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, index)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, getter_ptr)
  setD3_u32(view, offset, setter_ptr)
}

export function writeFunclistDefString(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, index: Uint8, flags: JSPropFlags, str_ptr: BorrowedHeapCharPointer, str_len: Uint32, name_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 57)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, index)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, str_ptr)
  setD2_u32(view, offset, str_len)
  setD3_u32(view, offset, name_ptr)
}

export function writeFunclistDefInt32(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, maybe_key_len: Uint8, flags: JSPropFlags, index: Uint32, int_val: Int32, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 58)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, maybe_key_len)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, index)
  setD2_i32(view, offset, int_val)
  setD3_u32(view, offset, key_ptr)
}

export function writeFunclistDefInt64(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, index: Uint8, flags: JSPropFlags, i64_val: Int64, name_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 59)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, index)
  setSlotC(view, offset, flags)
  setData_i64(view, offset, i64_val)
  setD3_u32(view, offset, name_ptr)
}

export function writeFunclistDefDouble(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, index: Uint8, flags: JSPropFlags, f64_val: Float64, key_ptr: BorrowedHeapCharPointer): void {
  setOpcode(view, offset, 60)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, index)
  setSlotC(view, offset, flags)
  setData_f64(view, offset, f64_val)
  setD3_u32(view, offset, key_ptr)
}

export function writeFunclistDefNull(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, flags: JSPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32, index: Uint32): void {
  setOpcode(view, offset, 61)
  setSlotA(view, offset, target_funclist_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
  setD3_u32(view, offset, index)
}

export function writeFunclistDefUndefined(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, flags: JSPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32, index: Uint32): void {
  setOpcode(view, offset, 62)
  setSlotA(view, offset, target_funclist_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
  setD3_u32(view, offset, index)
}

export function writeFunclistDefObject(view: DataView, offset: CommandPtr, target_funclist_slot: FuncListSlot, object_funclist_slot: FuncListSlot, flags: JSPropFlags, key_ptr: BorrowedHeapCharPointer, key_len: Uint32, index: Uint32): void {
  setOpcode(view, offset, 63)
  setSlotA(view, offset, target_funclist_slot)
  setSlotB(view, offset, object_funclist_slot)
  setSlotC(view, offset, flags)
  setD1_u32(view, offset, key_ptr)
  setD2_u32(view, offset, key_len)
  setD3_u32(view, offset, index)
}

export const OP_ENCODERS = [
  writeInvalid,
  writeNewObject,
  writeNewObjectProto,
  writeNewArray,
  writeNewDate,
  writeNewError,
  writeNewArraybuffer,
  writeNewTypedArray,
  writeNewSymbol,
  writeNewFloat64,
  writeNewString,
  writeNewBigint,
  writeNewFunc,
  writeSetStrValue,
  writeSetStrNull,
  writeSetStrUndef,
  writeSetStrBool,
  writeSetStrInt32,
  writeSetStrF64,
  writeSetStrBigint,
  writeSetStrString,
  writeSetIdxValue,
  writeSetIdxNull,
  writeSetIdxUndef,
  writeSetIdxBool,
  writeSetIdxInt32,
  writeSetIdxF64,
  writeSetIdxBigint,
  writeSetIdxString,
  writeSet,
  writeDefGetset,
  writeGet,
  writeGetStr,
  writeGetIdx,
  writeGlobal,
  writeGlobalGetStr,
  writeGlobalSetStr,
  writeMapSet,
  writeMapSetStr,
  writeSetAdd,
  writeCall,
  writeCallCtor,
  writeEval,
  writeThrow,
  writeResolveExc,
  writeDup,
  writeDupPtr,
  writeFree,
  writeFreePtr,
  writeBytecodeWrite,
  writeBytecodeRead,
  writeFunclistNew,
  writeFunclistAssign,
  writeFunclistFree,
  writeFunclistDefCfunc,
  writeFunclistDefCfuncCtor,
  writeFunclistDefCgetset,
  writeFunclistDefString,
  writeFunclistDefInt32,
  writeFunclistDefInt64,
  writeFunclistDefDouble,
  writeFunclistDefNull,
  writeFunclistDefUndefined,
  writeFunclistDefObject,
] as const

type OpcodeToEncoder = typeof OP_ENCODERS

type OpcodeToParams = {
  [Op in keyof OpcodeToEncoder]: OpcodeToEncoder[Op] extends (
    view: DataView,
    offset: CommandPtr,
    ...args: infer P
  ) => void
    ? P
    : never
}

export type OpcodeToCommand = {
  [Op in keyof OpcodeToParams]: { op: Op; args: OpcodeToParams[Op] }
}

export type Command = OpcodeToCommand[keyof OpcodeToCommand]
